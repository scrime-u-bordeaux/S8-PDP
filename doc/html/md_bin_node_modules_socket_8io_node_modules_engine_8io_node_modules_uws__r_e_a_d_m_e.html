<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VisualImpro: Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VisualImpro
   </div>
   <div id="projectbrief">doxygen for VisualImpro</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code>uws</code> tries to mimic <code>ws</code> as closely as possible without sacrificing too much performance. In most cases you simply swap &lsquo;require('ws&rsquo;)<code>with</code>require('uws')`:</p>
<div class="fragment"><div class="line">var WebSocketServer = require(&#39;uws&#39;).Server;</div><div class="line">var wss = new WebSocketServer({ port: 3000 });</div><div class="line"></div><div class="line">function onMessage(message) {</div><div class="line">    console.log(&#39;received: &#39; + message);</div><div class="line">}</div><div class="line"></div><div class="line">wss.on(&#39;connection&#39;, function(ws) {</div><div class="line">    ws.on(&#39;message&#39;, onMessage);</div><div class="line">    ws.send(&#39;something&#39;);</div><div class="line">});</div></div><!-- fragment --><h5>Deviations from ws</h5>
<p>There are some important incompatibilities with <code>ws</code> though, we aim to be ~90% compatible but will never implement behavior that is deemed too inefficient:</p>
<ul>
<li>Binary data is passed zero-copy as an <code>ArrayBuffer</code>. This means you need to copy it to keep it past the callback. It also means you need to convert it with <code>Buffer.from(message)</code> if you expect a <code>Node.js Buffer</code>.</li>
<li><code>webSocket._socket</code> is not a <code>net.Socket</code>, it is just a getter function with very basic functionalities.</li>
<li><code>webSocket._socket.remote...</code> might fail, you need to cache it at connection.</li>
<li><code>webSocket</code> acts like an <code>EventEmitter</code> with one listener per event maximum.</li>
<li><code>webSocket.upgradeReq</code> is only valid during execution of the connection handler. If you want to keep properties of the upgradeReq for the entire lifetime of the webSocket you better attach that specific property to the webSocket at connection.</li>
</ul>
<h2>Installation</h2>
<p><a href="https://www.npmjs.com/package/uws"></a></p>
<p>At installation <code>uws</code> will try to recompile itself using the system's C++11 compiler (GCC 4.8+, Clang 3.3, VC++ 2015+). If this fails it will silently fall back to using the precompiled binaries. NPM installation will never fail but &lsquo;require('uws&rsquo;)` will throw if it cannot properly load the binary module. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
