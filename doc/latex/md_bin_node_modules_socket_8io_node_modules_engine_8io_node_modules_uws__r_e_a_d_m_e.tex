{\ttfamily uws} tries to mimic {\ttfamily ws} as closely as possible without sacrificing too much performance. In most cases you simply swap `require(\textquotesingle{}ws'){\ttfamily with}require(\textquotesingle{}uws\textquotesingle{})\`{}\+:


\begin{DoxyCode}
var WebSocketServer = require('uws').Server;
var wss = new WebSocketServer(\{ port: 3000 \});

function onMessage(message) \{
    console.log('received: ' + message);
\}

wss.on('connection', function(ws) \{
    ws.on('message', onMessage);
    ws.send('something');
\});
\end{DoxyCode}


\subparagraph*{Deviations from ws}

There are some important incompatibilities with {\ttfamily ws} though, we aim to be $\sim$90\% compatible but will never implement behavior that is deemed too inefficient\+:


\begin{DoxyItemize}
\item Binary data is passed zero-\/copy as an {\ttfamily Array\+Buffer}. This means you need to copy it to keep it past the callback. It also means you need to convert it with {\ttfamily Buffer.\+from(message)} if you expect a {\ttfamily Node.\+js Buffer}.
\item {\ttfamily web\+Socket.\+\_\+socket} is not a {\ttfamily net.\+Socket}, it is just a getter function with very basic functionalities.
\item {\ttfamily web\+Socket.\+\_\+socket.\+remote...} might fail, you need to cache it at connection.
\item {\ttfamily web\+Socket} acts like an {\ttfamily Event\+Emitter} with one listener per event maximum.
\item {\ttfamily web\+Socket.\+upgrade\+Req} is only valid during execution of the connection handler. If you want to keep properties of the upgrade\+Req for the entire lifetime of the web\+Socket you better attach that specific property to the web\+Socket at connection.
\end{DoxyItemize}

\subsection*{Installation}

\href{https://www.npmjs.com/package/uws}{\tt }

At installation {\ttfamily uws} will try to recompile itself using the system\textquotesingle{}s C++11 compiler (G\+CC 4.\+8+, Clang 3.\+3, V\+C++ 2015+). If this fails it will silently fall back to using the precompiled binaries. N\+PM installation will never fail but `require(\textquotesingle{}uws')\`{} will throw if it cannot properly load the binary module. 